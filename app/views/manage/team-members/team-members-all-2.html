{% extends "layout.html" %}

{% set title = "Manage team access" %}

{% block pageTitle %}
    {{title}} - GOV.UK
{% endblock %}

{% block beforeContent %}
  {% include "includes/account-nav-admin-corp-all-2.html" %}
  {% include "includes/breadcrumb-three-level-all-2.html" %}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <h1 class="govuk-heading-xl">
      {{title}}
    </h1>

    {% if data['numServices'] == 1 %}
      {{ govukButton({
        text: "Add a team member",
        href: "chemicals/invite-user/add-user-details-1"
      }) }}
    {% endif %}

    {% if data['numServices'] == 3 %}
      {{ govukButton({
        text: "Add a team member",
        href: "chemicals/invite-user/add-user-details-many"
      }) }}
    {% endif %}

    {% set setUserNameHtml %}
    {% if data['subscribeService'] == "Yes" %}
      <a class="govuk-link--no-visited-state" href="services-on-team-member-invited-service">
        {{ data['personalFirstName'] }}
        {{ data['personalSurname'] }}
      </a>
    {% endif %}

    {% if data['subscribeService'] == "No" %}
            <a class="govuk-link--no-visited-state" href="services-on-team-member-invited-no-service">
              {{ data['personalFirstName'] }}
              {{ data['personalSurname'] }}
            </a>
      {% endif %}


    {% endset %}



    {% set setUserEmailHtml %}
          {{ data['businessEmail'] }}
    {% endset %}

    {% set setSystemRoleHtml %}
        {{ data['serviceRole'] }}
    {% endset %}

    {{ govukTable({
      caption: "All team members",
      captionClasses: "govuk-visually-hidden",
      firstCellIsHeader: false,
      head: [
        {
          html: 'Team member',
          format: 'column-quarter column-full'
        },
        {
          html: 'Email address',
          format: 'column-third column-full'
        },
        {
          html: 'Account status',
          format: 'column-sixth column-full'
        }
      ],
      rows: [
        [
          {
            html: setUserNameHtml
          },
          {
            html: setUserEmailHtml
          },
          {
            html: '<span class="govuk-visually-hidden--desktop td-header">Account status:</span> Invite sent'
          }
        ],
        [
          {
            html: '<span class="govuk-visually-hidden--desktop td-header">Team member:</span> <a class="govuk-link--no-visited-state" href="services-on-team-member-admin-self-all-1">Ann Cooper (you)</a>'
          },
          {
            html: '<span class="govuk-visually-hidden--desktop td-header">Email address:</span> Ann.Cooper@email.com'
          },
          {
            html: '<span class="govuk-visually-hidden--desktop td-header">Account status:</span> Approved'
          }
        ]

      ]
    }) }}


  </div>
</div>





{% endblock %}
